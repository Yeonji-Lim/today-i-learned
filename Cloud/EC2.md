# EC2

## 구축(EC2)
### public IPv4 Address
해당 서버의 주소
-> 외부에서 접근하기 위해서 사용하는 주소로, 그 값이 바뀔 수도 있다.
그런데 바뀌지 않는 고정주소를 부여하고 싶다면 탄력적 IP를 부여하는 것

### Elastic IP
적절한 IP 주소를 필요할 때 할당받음

### 접속하기
```shell
chmod 400 [키페어_이름].cer
ssh -i [키페어_이름].cer ubuntu@[public_ip]
```

## AWS EC2서버에 ssh로 접속하기

makemethink.tistory.com

이때 default region name은 처음에 설정한 지역을 보고 설정하면 된다.

### ssh pem key 설정

~~~
$ cd ~/.ssh
$ cp "[pem파일경로]" ./
~~~

이렇게 해주면 다음과 같이 접속가능

~~~
$ ssh -i "[pem파일명].pem" [계정명]@[host주소]
~~~

그런데 이때 사용하는 aws 인스턴스의 이미지에 따라 계정명이 달라지니 주의하도록 하자

## EC2로 프로젝트 배포하기

내 프로젝트는 톰캣으로 한거였기 때문에 설치..

파일질라가 필요함


### ssh 접속시 -v

ssh로 접속하고자 할 때 ssh -i 사이에 -v를 붙이면 디버깅모드로 과정을 출력결과로 볼 수 있다. 

### ssh: connect to host ec2-X-X-X-X.compute-1.amazonaws.com port 22: Connection timed out 에러

서버가 클라이언트에 응답하지 않고 클라이언트 프로그램이 포기하였음을 나타낸다.
aws에서는 이 오류의 일반적인 원인은 다음과 같다고 한다.

- 보안 그룹 또는 네트워크 ACL이 액세스를 허용하지 않습니다.
- 인스턴스의 운영 체제에 방화벽이 있습니다.
- 클라이언트와 서버 사이에 방화벽이 있습니다.
- 호스트가 존재하지 않습니다.

나의 경우 첫번째의 경우였다.

aws 를 처음 접하고 처음 생성해보는 것이기 때문에 그냥 하라는대로 따라서 보안그룹을 설정했었는데,

이때 보안상 지정된 ip에서만 ssh 접속이 가능하도록 설정하였었다.

이런 경우 생성했던 장소가 아닌 다른 장소에서 ssh를 접속하고자 하면 접속이 안된다.

이 경우 임시로 이 ip를 변경해줄 필요가 있다.

ec2 management console에서 
네트워크 및 보안 > 보안 그룹 > 인바운드 규칙 > 인바운드 규칙편
ssh에 해당하는 부분의 소스를 내 IP로 바꿔준다.