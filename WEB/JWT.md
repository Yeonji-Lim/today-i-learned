# Json Web Token

사용자의 정보가 암호화 되어있는 문자열

- 로그인을 하면 서버가 토큰을 만들어서 사용자에게 넘겨줌

- 서버는 토큰으로 인증된 사용자인지 판단

이렇게 [인증](Autentication.md)하는 방식이 표준 인증 방식이다.

토큰 발행은 서버만, 저장은 클라이언트만 한다. 

## 장점

- 문자열이기 때문에 HTTP의 헤더, URL, Body 어디든 위치할 수 있다.

- stateless하기 때문에 기존 세션 인증 방식에 비해 가볍고 유연하다. 

- 서버-클라이언트의 종속성에 비해 토큰 기반 인증은 분산 환경에서 더욱 유연하게 사용할 수 있기 때문에 최근 인증 방식으로 많이 사용하고 있다.

## 단점

### [payload](Payload.md) 데이터가 커진다.

토큰 자체의 문자열 길이가 Session ID보다 길기 때문

### JWT 토큰은 정보를 가지고 있다.

이 토큰을 탈취 당하는 것은 사용자 정보가 탈취 당한 것과 같다.

그렇기 때문에 중요한 정보는 토큰 내에 포함시키지 ㅇ낳는 것이 좋다.

### 한번 발급된 JWT 토큰은 계속해서 사용할 수 있다.

Access Token의 유효기간을 짧게 하고 Refresh Token을 발급해주면 비교적 피해를 줄일 수 있다. 

완벽한 방법은 아니다.

### XSS 공격에 취약해진다.

토큰은 일반적으로 브라우저의 localStorage에 저장하기 때문

localStorage는 스크립트로 정보를 가져올 수 있다.

이 토큰을 쿠키에 저장하면 [CSRF](CSRF) 공격에 여전히 취약하다.