
# 싱글톤 패턴

어플리케이션이 시작될 때 어떤 클래스가 최초 1번만 메모리를 할당하고 그 메모리에 인스턴스를 만들어서 사용하는 디자인 패턴

즉, 객체의 인스턴스가 오직 1개만 생성된다.


레지스트리 같은 설정 파일의 경우 여러개 생성되면 설정 값이 변경될 위험이 생길 수 있다.

인스턴스가 1개만 생성되는 싱글톤 패턴을 이용하면 하나의 인스턴스를 메모리에 등록해서 여러 스레드가 동시에 해당 인스턴스를 공유하여 사용할 수 있게끔 할 수 있기 때문에 요청이 많은 곳에서 사용하면 효율을 높일 수 있다.


만들 때 동시성 문제를 고려해서 설계해야 한다는 주의 사항이 있다.


## 장점

- 메모리 측면

- 메모리 낭비 방지 : 최초 한번의 new -> 고정된 메모리 영역 -> 추후 접근 시 메모리 낭비 방지

- 데이터의 쉬운 공유 : 싱글톤으로 만들어진 클래스의 인스턴스는 전역

- 이미 생성된 인스턴스 활용 -> 속도의 이점


인스턴스가 절대적으로 한 개만 존재하는 것을 보증한다.

DBCP(DataBase Connection Pool)처럼 공통된 객체를 여러개 생성해서 사용해야 하는 상황에서 많이 사용

두 번째 이용시 부터는 객체 로딩 시간이 줄어 성능이 좋아진다.


## 단점


- 구현 코드 자체가 많이 필요하다

- 테스트하기 어렵다 : 싱글톤 인스턴스는 자원을 공유 -> 테스트가 격리된 환경에서 수행되려면 매번 인스턴스의 상태를 초기화 해주어야

- 싱글톤 인스턴스가 너무 많은 일을 하거나 많은 데이터를 공유시킬 경우에 다른 클래스의 인스턴스들 간에 결합도가 높아짐

-> 개방-폐쇄 원칙 위배

-> 객체 지향 설계 원칙에 어긋남

-> 수정이 어려워지고 유지보수 비용이 높아짐

-> 멀티쓰레드 환경에서 동기화 처리를 안하면 인스턴스가 2개 생성될 수 잇는 가능성

- 의존 관계상 클라이언트가 구체 클래스에 의존 : new 키워드로 클래스 안에서 객체를 생성함 -> SOLID 원칙 중 DIP 위반, OCP 위반 가능성 높음

- 자식 클래스를 만들 수 없다.

- 내부 상태를 변경하기 어렵다.


따라서 꼭 필요한 경우가 아니라면 싱글톤 패턴은 지양하자
