# I-node

== "i-node" == "inode"

모두 같은 말이고 I(Index) Node의 줄임말이다.

이때, Node는 데이터의 지점이나 장치를 말하는데,

예를 들어서 데이터를 가지고 있는 디스크의 한 지점이나, 컴퓨터, 휴대폰, 프린트 같은 장치를 말한다.

다시 돌아와서, i-node는 이 node, 즉 데이터를 가지고 있는 것(파일)을 빠르게 찾기 위해서 순서대로 정리한 정보를 말한다.

리눅스에서 i-node는 "ls -l(L)"이라는 명령어로 확인할 수 있다.

~~~
ls -l
~~~
리눅스 터미널에서 이 명령어를 치면 파일들의 정보가 쭉 나오는데

이게 바로 inode다

(번호까지 확인하고 싶다면 "ls -li" 또는 "ls -il")


그 맨 앞자리에 알 수 없게 써있는 것을 보면

"-"로 시작하는게 있고 "d"로 시작하는게 있다.

"-" : 일반 파일이라는 뜻

"d" : 디렉토리라는 뜻


일반 파일 중에서 실행 파일이나 이미지 파일 일 경우,

데이터가 바이너리 형태로 저장되어 있다.

이때는 텍스트 파일을 읽는 "cat"이나 "vi" 명령어로 읽을 수 없다.


바이너리 파일인지 텍스트 파일인지 구분하는 법은 "file"이라는 명령어를 사용하면 된다.

"file"은 파일의 종류를 알려준다.

~~~
file [파일 이름]
~~~
파일의 종류에는 디렉토리와 일반 파일 이외에도, 특수파일(b,c,p,s) 그리고 링크파일(l), 이렇게 총 7개가 있다.


## 링크 파일

링크 역할을 하는 파일은 소프트 링크(==심볼릭 링크)와 하드 링크가 있다.

아이노드 맨 앞이 "l"로 표시되어있다면 소프트 링크이다.


소프트 링크 : 실체가 없고 원본과 연결된 파일, 어떤 파일과 연결된 상징적인 파일

하드링크 : 실체가 있고 원본과 연결된 파일


소프트 링크를 만들어 보자

~~~
touch example
ln -s example ex_soft
~~~

이런 식으로 example의 소프트 링크인 ex_soft를 만들 수 있고 inode는 "l"로 시작한다.

권한도 다르고, i-node 번호도 다르고 파일 크기도 다른데, 생성된 시간은 같다.

원본이랑 연결되었기 때문! == 링크


윈도우에서 바로가기 파일이랑 거의 같다.

연결만 하기 때문에 원본 파일보다 크기가 훨씬 작고, 삭제해도 원본은 지워지지 않는다.

그런데 원본파일이 삭제되면 소프트 링크는 사용할 수 없다.


소프트 링크를 만들때 쓴 "-s" 옵션을 빼면 하드링크를 만들 수 있다.

~~~
ln example ex_hard
~~~

하드링크는 원본과 똑같다

다른 건 이름이다.


그런데 이건 복사랑은 다르다!

복사는 똑같지만 다른 객체를 만드는 것인데, 하드링크는 그냥 같은 놈인데 이름만 다른거다.

복사는 복사본을 바꾸면 원본은 그대로인데, 하드링크는 하드링크파일을 바꾸면 원본도 바뀐다.


그러면 하드링크와 소프트링크의 다른 점은?

소프트 링크는 원본이 삭제되면 사용할 수 없는데,

하드링크는 원본이나 하드링크 중 하나를 제거해도, 같은 inode를 가진 다른 하나가 더 있기 때문에 사용 가능하다.


그리고 디렉토리는 하드링크 파일을 만들 수 없다는 점이 크게 다른 점이다.

소프트 링크는 그냥 바로가기 같은 것이라서 디렉토리도 소프트링크할 수 있는 반면,

디렉토리를 하드링크하면 여러 문제가 발생할 수 있기 때문이다.


복사가 아니라서 같은 것이 이름만 다른데 이게 디렉토리라면? 파일 시스템에서 혼동이 올 수 있다.